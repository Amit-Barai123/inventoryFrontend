"use strict";(self.webpackChunkkims_frontend=self.webpackChunkkims_frontend||[]).push([[65],{6928:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var o=s(5043),n=s(1938),a=s(8087),l=s(1036),r=s(579);class c extends o.Component{constructor(e){super(e),this.handleUpdateUom=async()=>{const{uomname:e}=this.state,{onHide:t,fetchUoms:s,uom:o}=this.props;try{await n.A.updateUom(o.id,{uomname:e}),l.oR.success("UOM updated successfully"),s(),t()}catch(a){console.error(a),l.oR.error("Failed to update UOM")}},this.handleInputChange=e=>{this.setState({uomname:e.target.value})},this.state={uomname:this.props.uom.uomname||""}}render(){const{show:e,onHide:t}=this.props,{uomname:s}=this.state;return(0,r.jsxs)(a.A,{show:e,onHide:t,children:[(0,r.jsx)(a.A.Header,{closeButton:!0,children:(0,r.jsx)(a.A.Title,{children:"Update UOM"})}),(0,r.jsx)(a.A.Body,{children:(0,r.jsx)("input",{type:"text",value:s,onChange:this.handleInputChange,className:"form-control",placeholder:"Enter UOM Name"})}),(0,r.jsxs)(a.A.Footer,{children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:t,children:"Cancel"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:this.handleUpdateUom,children:"Update"})]})]})}}class i extends o.Component{constructor(e){super(e),this.openUpdateUomModal=()=>{this.setState({showUpdateUomModal:!0})},this.closeUpdateUomModal=()=>{this.setState({showUpdateUomModal:!1})},this.state={showUpdateUomModal:!1}}render(){const{showUpdateUomModal:e}=this.state,{uom:t,fetchUoms:s}=this.props;return(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{role:"button",onClick:this.openUpdateUomModal,className:"btn btn-primary me-2",title:"Edit UOM",children:(0,r.jsx)("i",{className:"bi bi-pencil-fill"})}),t&&(0,r.jsx)(c,{show:e,onHide:this.closeUpdateUomModal,uom:t,fetchUoms:s})]})}}var d=s(4282);class h extends o.Component{render(){const{show:e,onHide:t,onDelete:s,uom:o}=this.props;return(0,r.jsxs)(a.A,{show:e,onHide:t,children:[(0,r.jsx)(a.A.Header,{closeButton:!0,children:(0,r.jsx)(a.A.Title,{children:"Delete UOM"})}),(0,r.jsx)(a.A.Body,{children:(0,r.jsxs)("p",{children:["Are you sure you want to delete the UOM ",(0,r.jsx)("strong",{children:null===o||void 0===o?void 0:o.uomname}),"?"]})}),(0,r.jsxs)(a.A.Footer,{children:[(0,r.jsx)(d.A,{variant:"secondary",onClick:t,children:"Cancel"}),(0,r.jsx)(d.A,{variant:"danger",onClick:s,children:"Delete"})]})]})}}class m extends o.Component{constructor(e){super(e),this.openDeleteModal=()=>{this.setState({showDeleteModal:!0})},this.closeDeleteModal=()=>{this.setState({showDeleteModal:!1})},this.handleDelete=async()=>{const{uom:e,fetchUoms:t}=this.props;try{await n.A.deleteUom(e.id),l.oR.success(`UOM ${e.uomname} deleted successfully`),this.closeDeleteModal(),t()}catch(s){s.response&&s.response.data.error.includes("violates foreign key constraint")?(this.closeDeleteModal(),l.oR.error("UOM cannot be deleted as it is connected to others.")):l.oR.error("Failed to delete UOM"),console.error(s)}},this.state={showDeleteModal:!1}}render(){const{showDeleteModal:e}=this.state,{uom:t}=this.props;return(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{role:"button",className:"btn btn-danger ",title:"Delete UOM",onClick:this.openDeleteModal,children:(0,r.jsx)("i",{className:"bi bi-trash-fill"})}),(0,r.jsx)(h,{show:e,onHide:this.closeDeleteModal,onDelete:this.handleDelete,uom:t})]})}}class u extends o.Component{constructor(e){super(e),this.handleSearchChange=e=>{this.setState({search:e.target.value})},this.state={uoms:[],loading:!0,search:""}}componentDidMount(){this.getAllUoms()}getAllUoms(){n.A.getAllUoms().then((e=>{this.setState({uoms:e.data.uom,loading:!1})})).catch((e=>{console.log(e),this.setState({loading:!1})}))}render(){const{uoms:e,loading:t,search:s}=this.state,o=e.filter((e=>{var t;return null===(t=e.uomname)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase())}));return t?(0,r.jsx)("div",{className:"w-100 text-center mt-5",children:(0,r.jsx)("div",{className:"spinner-border",role:"status",children:(0,r.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,r.jsx)("div",{className:"row mx-0 justify-content-center",children:(0,r.jsxs)("div",{className:"col-10 px-0",children:[(0,r.jsx)("div",{className:"row mb-3 justify-content-center mx-0",children:(0,r.jsx)("div",{className:"col-md-6 col-10 px-0",children:(0,r.jsx)("input",{type:"text",className:"form-control",placeholder:"Search UOMs",value:s,onChange:this.handleSearchChange})})}),(0,r.jsx)("div",{className:"row",children:o.length?o.map((e=>(0,r.jsx)("div",{className:"col-md-4 col-sm-6 col-12 mb-3",children:(0,r.jsx)("div",{className:"card h-100",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h5",{className:"card-title",children:e.uomname}),(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsx)(i,{uom:e,fetchUoms:()=>this.getAllUoms()}),(0,r.jsx)("div",{className:"me-3"}),(0,r.jsx)(m,{uom:e,fetchUoms:()=>this.getAllUoms()})]})]})})},e.id))):(0,r.jsx)("div",{className:"col-12 text-center",children:"No UOMs found"})})]})})}}class p extends o.Component{constructor(e){super(e),this.handleInputChange=e=>{this.setState({uomName:e.target.value})},this.handleCreate=async()=>{const{getAllUoms:e}=this.props,{uomName:t}=this.state;if(t)try{await n.A.createUom({uomname:t}),e(),l.oR.success("UOM created successfully"),this.props.onHide()}catch(s){console.log(s),l.oR.error("Failed to create UOM.")}else l.oR.error("UOM name cannot be empty!")},this.state={uomName:""}}render(){const{show:e,onHide:t}=this.props,{uomName:s}=this.state;return(0,r.jsx)(a.A,{show:e,onHide:t,children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:"Create UOM"}),(0,r.jsx)("button",{type:"button",className:"btn-close",onClick:t})]}),(0,r.jsx)("div",{className:"modal-body mb-3",children:(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"uomName",className:"mb-2",children:"UOM Name"}),(0,r.jsx)("input",{type:"text",className:"form-control",id:"uomName",placeholder:"Enter UOM name",value:s,onChange:this.handleInputChange})]})}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Cancel"}),(0,r.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.handleCreate,children:"Create UOM"})]})]})})}}const x=p;class U extends o.Component{constructor(e){super(e),this.openUomModal=()=>{this.setState({showUomModal:!0})},this.closeUomModal=()=>{this.setState({showUomModal:!1})},this.state={showUomModal:!1}}render(){const{showUomModal:e}=this.state,{getAllUoms:t}=this.props;return(0,r.jsx)("div",{className:"row mx-0 justify-content-center",children:(0,r.jsxs)("div",{className:"col-10 px-0 d-flex justify-content-end",children:[(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>this.openUomModal(),children:"Create Uom"}),(0,r.jsx)(x,{show:e,onHide:this.closeUomModal,getAllUoms:t})]})})}}class j extends o.Component{constructor(e){super(e),this.getAllUoms=()=>{this.getAllUomsRef.current&&this.getAllUomsRef.current.getAllUoms()},this.getAllUomsRef=o.createRef()}render(){return(0,r.jsxs)("div",{className:"mt-100",children:[(0,r.jsx)("h2",{className:"text-center",children:"Uom Page"}),(0,r.jsx)(U,{getAllUoms:this.getAllUoms}),(0,r.jsx)(u,{ref:this.getAllUomsRef})]})}}},1938:(e,t,s)=>{s.d(t,{A:()=>n});var o=s(214);class n{static createUom(e){return o.A.post("/uom",e)}static getAllUoms(){return o.A.get("/uoms")}static getUomById(e){return o.A.get(`/uom/${e}`)}static updateUom(e,t){return o.A.put(`/uom/${e}`,t)}static deleteUom(e,t){return o.A.delete(`/uom/${e}`,t)}}},3662:(e,t,s)=>{function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}s.d(t,{A:()=>o})}}]);
//# sourceMappingURL=65.2d6d7660.chunk.js.map