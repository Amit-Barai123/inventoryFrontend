"use strict";(self.webpackChunkkims_frontend=self.webpackChunkkims_frontend||[]).push([[178],{1108:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(5043),a=n(249),i=n(579);class o extends s.Component{constructor(e){super(e),this.handleChange=e=>{this.setState({selectedValue:e}),this.props.onUpdateSelectedValue(e)},this.state={selectedValue:this.props.selectedValue||(this.props.isMulti?[]:"")}}componentDidUpdate(e){e.selectedValue!==this.props.selectedValue&&this.setState({selectedValue:this.props.selectedValue||(this.props.isMulti?[]:"")})}render(){const{selectedValue:e}=this.state,{data:t,placeholder:n,width:s,placeholderColor:o,menuPlacement:l,isMulti:r}=this.props;return(0,i.jsx)("div",{className:"DropDownList m-1 "+(s?`w-${s}`:""),children:(0,i.jsx)(a.Ay,{className:"dropdown",placeholder:n,value:e,options:t,onChange:this.handleChange,isMulti:r,isClearable:!0,styles:{control:e=>({...e,cursor:"pointer"}),placeholder:e=>({...e,color:o||"#6c757d"}),menu:e=>({...e,overflow:"hidden"}),menuList:e=>({...e,maxHeight:200,overflowY:"auto"})},menuPlacement:l||"auto"})})}}const l=o},8178:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var s=n(5043),a=n(8087),i=n(1036),o=n(1457),l=n(2026),r=n(1938),d=n(2153),c=n(1108),h=n(214);class m{static createInventory(e){return h.A.post("/inventory",e)}static getAllInventory(){return h.A.get("/inventory")}static getAllInvoiceWithPagenation(e){return h.A.post("/inventory-list",e)}static getInventoryById(e){return h.A.get(`/inventory/${e}`)}static updateInventory(e,t){return h.A.put(`/inventory/${e}`,t)}static deleteInventory(e){return h.A.delete(`/inventory/${e}`)}}var u=n(579);class v extends s.Component{constructor(e){super(e),this.handleInputChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleItemChange=e=>{this.setState({item_id:e})},this.handleVendorChange=e=>{this.setState({vendor_id:e})},this.handleInvoiceChange=e=>{this.setState({invoice_number:e})},this.handleCreate=async()=>{const{fetchInventory:e}=this.props,{item_id:t,vendor_id:n,uom_id:s,quantity:a,actualquantity:o,price:l,received_date:r,cost:d,invoice_number:c}=this.state,u={item_id:t.value,vendor_id:n.value,uom_id:t.uom,quantity:a,actualquantity:o,price:l,received_date:r,cost:d,invoice_number:c.value},v={itemid:t.value,quantity:o},p={date:r,item_id:t.value,credit_quantity:o,invoice_no:c.value,vendor_id:n.value,uom_id:t.uom};try{await m.createInventory(u);const t=await h.A.post("/increase-quantity",v),n=await h.A.post("/transaction",p);console.log(`the response of inventory store is ${JSON.stringify(t)}`),console.log(`the going transcation data is is ${JSON.stringify(p)}`),console.log(`the transcation data from backend ${JSON.stringify(n)}`),e(),i.oR.success("Inventory created successfully"),this.resetForm(),this.props.onHide()}catch(y){console.log(y),i.oR.error("Failed to create inventory.")}},this.resetForm=()=>{this.setState({item_id:"",vendor_id:"",uom_id:"",quantity:"",actualquantity:"",price:"",received_date:"",cost:"",invoice_number:""})},this.state={item_id:"",vendor_id:"",uom_id:"",quantity:"",actualquantity:"",price:"",received_date:"",cost:"",invoice_number:""}}componentDidMount(){}render(){var e;const{show:t,onHide:n,items:s,vendors:i,uoms:o,invoices:l}=this.props,{item_id:r,vendor_id:d,uom_id:h,quantity:m,actualquantity:v,price:p,received_date:y,cost:x,invoice_number:g}=this.state;return(0,u.jsx)(a.A,{show:t,onHide:n,centered:!0,children:(0,u.jsxs)("div",{className:"modal-content",style:{width:"600px"},children:[(0,u.jsxs)("div",{className:"modal-header",children:[(0,u.jsx)("h5",{className:"modal-title",children:"Create Inventory Item"}),(0,u.jsx)("button",{type:"button",className:"btn-close",onClick:n})]}),(0,u.jsxs)("div",{className:"modal-body",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"item_id",className:"mb-2",children:"Item"}),(0,u.jsx)(c.A,{name:"item_id",placeholder:"Select Item",data:s.map((e=>({value:e.id,label:e.itemname,uom:e.uomid}))),onUpdateSelectedValue:this.handleItemChange,selectedValue:r})]}),(0,u.jsxs)("div",{className:"form-group mt-3",children:[(0,u.jsx)("label",{htmlFor:"vendor_id",className:"mb-2",children:"Vendor"}),(0,u.jsx)(c.A,{name:"vendor_id",placeholder:"Select Vendor",data:i.map((e=>({value:e.id,label:e.vendorname}))),onUpdateSelectedValue:this.handleVendorChange,selectedValue:d})]}),(0,u.jsxs)("div",{className:"form-group mt-3",children:[(0,u.jsx)("label",{htmlFor:"quantity",className:"mb-2",children:"Quantity"}),(0,u.jsx)("input",{type:"number",className:"form-control",name:"quantity",id:"quantity",placeholder:"Enter Quantity",value:m,onChange:this.handleInputChange})]}),(0,u.jsxs)("div",{className:"form-group mt-3",children:[(0,u.jsx)("label",{htmlFor:"received_date",className:"mb-2",children:"Received Date"}),(0,u.jsx)("input",{type:"date",className:"form-control",name:"received_date",id:"received_date",value:y,onChange:this.handleInputChange})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsxs)("div",{className:"form-group mt-3 mt-md-0",children:[(0,u.jsx)("label",{htmlFor:"uom_id",className:"mb-2",children:"Unit of Measurement (UOM)"}),(0,u.jsx)("input",{type:"text",className:"form-control",name:"uom_id",id:"uom_id",placeholder:"Unit of Measurement",value:(null===(e=o.find((e=>e.id===r.uom)))||void 0===e?void 0:e.uomname)||"",readOnly:!0})]}),(0,u.jsxs)("div",{className:"form-group mt-3",children:[(0,u.jsx)("label",{htmlFor:"actualquantity",className:"mb-12px",children:"Actual Quantity"}),(0,u.jsx)("input",{type:"number",className:"form-control h-38",name:"actualquantity",id:"actualquantity",placeholder:"Enter Actual Quantity",value:v,onChange:this.handleInputChange})]}),(0,u.jsxs)("div",{className:"form-group mt-3",children:[(0,u.jsx)("label",{htmlFor:"price",className:"mb-2",children:"Price"}),(0,u.jsx)("input",{type:"number",className:"form-control",name:"price",id:"price",placeholder:"Enter Price",value:p,onChange:this.handleInputChange})]}),(0,u.jsxs)("div",{className:"form-group mt-3",children:[(0,u.jsx)("label",{htmlFor:"cost",className:"mb-2",children:"Cost"}),(0,u.jsx)("input",{type:"number",className:"form-control",name:"cost",id:"cost",placeholder:"Enter Cost",value:x,onChange:this.handleInputChange})]})]})]}),(0,u.jsxs)("div",{className:"form-group mt-3",children:[(0,u.jsx)("label",{htmlFor:"invoice_number",className:"mb-2",children:"Invoice Number"}),(0,u.jsx)(c.A,{name:"invoice_number",placeholder:"Select Invoice Number",data:l.map((e=>({value:e.invoice_number,label:e.invoice_number}))),onUpdateSelectedValue:this.handleInvoiceChange,selectedValue:g,menuPlacement:"top"})]})]}),(0,u.jsxs)("div",{className:"modal-footer",children:[(0,u.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"Cancel"}),(0,u.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.handleCreate,children:"Create Inventory"})]})]})})}}const p=v;class y extends s.Component{constructor(e){super(e),this.openInventoryModal=()=>{this.setState({showInventoryModal:!0})},this.closeInventoryModal=()=>{this.setState({showInventoryModal:!1})},this.state={showInventoryModal:!1}}render(){const{showInventoryModal:e}=this.state,{fetchInventory:t,items:n,vendors:s,uoms:a,invoices:i}=this.props;return(0,u.jsx)("div",{className:"container  justify-content-center",children:(0,u.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,u.jsx)("button",{className:"btn btn-primary",onClick:()=>this.openInventoryModal(),children:"Create Inventory"}),(0,u.jsx)(p,{show:e,onHide:this.closeInventoryModal,fetchInventory:t,items:n,vendors:s,uoms:a,invoices:i})]})})}}var x=n(4282);class g extends s.Component{render(){const{show:e,onHide:t,onDelete:n,inventory:s}=this.props;return(0,u.jsxs)(a.A,{show:e,onHide:t,children:[(0,u.jsx)(a.A.Header,{closeButton:!0,children:(0,u.jsx)(a.A.Title,{children:"Delete Inventory"})}),(0,u.jsx)(a.A.Body,{children:(0,u.jsxs)("p",{children:["Are you sure you want to delete the Inventory ",(0,u.jsx)("strong",{children:null===s||void 0===s?void 0:s.inventoryname}),"?"]})}),(0,u.jsxs)(a.A.Footer,{children:[(0,u.jsx)(x.A,{variant:"secondary",onClick:t,children:"Cancel"}),(0,u.jsx)(x.A,{variant:"danger",onClick:n,children:"Delete"})]})]})}}class j extends s.Component{constructor(e){super(e),this.openDeleteModal=()=>{this.setState({showDeleteModal:!0})},this.closeDeleteModal=()=>{this.setState({showDeleteModal:!1})},this.handleDelete=async()=>{const{inventory:e,fetchInventory:t}=this.props;try{await m.deleteInventory(e.id),i.oR.success(`Inventory ${e.inventoryname} deleted successfully`),this.closeDeleteModal(),t()}catch(n){n.response&&n.response.data.error.includes("violates foreign key constraint")?(this.closeDeleteModal(),i.oR.error("Inventory cannot be deleted as it is connected to others.")):i.oR.error("Failed to delete Inventory"),console.error(n)}},this.state={showDeleteModal:!1}}render(){const{showDeleteModal:e}=this.state,{inventory:t}=this.props;return(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{role:"button",className:"btn btn-danger ",title:"Delete Inventory",onClick:this.openDeleteModal,children:(0,u.jsx)("i",{className:"bi bi-trash-fill"})}),(0,u.jsx)(g,{show:e,onHide:this.closeDeleteModal,onDelete:this.handleDelete,inventory:t})]})}}var b=n(3514);class I extends s.Component{constructor(e){super(e),this.loadInventoryData=()=>{const{inventory:e,items:t,vendors:n}=this.props;if(e){const s=t.find((t=>t.id===e.item_id)),a=n.find((t=>t.id===e.vendor_id));this.setState({item_id:{value:e.item_id,label:s.itemname},vendor_id:{value:e.vendor_id,label:a.vendorname},uom_id:e.uom_id,quantity:e.quantity,actualquantity:e.actualquantity,price:e.price,received_date:(0,b._)(e.received_date),cost:e.cost,invoice_number:{value:e.invoice_number,label:e.invoice_number}})}},this.handleInputChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleItemChange=e=>{this.setState({item_id:e})},this.handleVendorChange=e=>{this.setState({vendor_id:e})},this.handleInvoiceChange=e=>{this.setState({invoice_number:e})},this.handleUpdate=async()=>{const{fetchInventory:e,inventory:t}=this.props,{item_id:n,vendor_id:s,uom_id:a,quantity:o,actualquantity:l,price:r,received_date:d,cost:c,invoice_number:h}=this.state,u={item_id:n.value,vendor_id:s.value,uom_id:a,quantity:o,actualquantity:l,price:r,received_date:d,cost:c,invoice_number:h.value};console.log(`the data going is ${JSON.stringify(u)}`);try{await m.updateInventory(t.id,u),e(),i.oR.success("Inventory updated successfully"),this.props.onHide()}catch(v){console.log(v),i.oR.error("Failed to update inventory.")}},this.state={item_id:"",vendor_id:"",uom_id:"",quantity:"",actualquantity:"",price:"",received_date:"",cost:"",invoice_number:""}}componentDidMount(){this.loadInventoryData()}componentDidUpdate(e){e.inventory!==this.props.inventory&&this.loadInventoryData()}render(){var e;const{show:t,onHide:n,items:s,vendors:i,uoms:o,invoices:l}=this.props,{item_id:r,vendor_id:d,uom_id:h,quantity:m,actualquantity:v,price:p,received_date:y,cost:x,invoice_number:g}=this.state;return(0,u.jsx)(a.A,{show:t,onHide:n,centered:!0,children:(0,u.jsxs)("div",{className:"modal-content",style:{width:"600px"},children:[(0,u.jsxs)("div",{className:"modal-header",children:[(0,u.jsx)("h5",{className:"modal-title",children:"Update Inventory Item"}),(0,u.jsx)("button",{type:"button",className:"btn-close",onClick:n})]}),(0,u.jsxs)("div",{className:"modal-body",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"item_id",children:"Item"}),(0,u.jsx)(c.A,{name:"item_id",placeholder:"Select Item",data:s.map((e=>({value:e.id,label:e.itemname,uom:e.uomid}))),onUpdateSelectedValue:this.handleItemChange,selectedValue:r})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"vendor_id",children:"Vendor"}),(0,u.jsx)(c.A,{name:"vendor_id",placeholder:"Select Vendor",data:i.map((e=>({value:e.id,label:e.vendorname}))),onUpdateSelectedValue:this.handleVendorChange,selectedValue:d})]})]}),(0,u.jsxs)("div",{className:"row mt-3",children:[(0,u.jsxs)("div",{className:"form-group mt-3 mt-md-0 col-md-6",children:[(0,u.jsx)("label",{htmlFor:"uom_id",className:"mb-1",children:"Unit of Measurement (UOM)"}),(0,u.jsx)("input",{type:"text",className:"form-control",name:"uom_id",id:"uom_id",placeholder:"Unit of Measurement",value:(null===(e=o.find((e=>e.id===h)))||void 0===e?void 0:e.uomname)||"",readOnly:!0})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"invoice_number",children:"Invoice Number"}),(0,u.jsx)(c.A,{name:"invoice_number",placeholder:"Select Invoice Number",data:l.map((e=>({value:e.invoice_number,label:e.invoice_number}))),onUpdateSelectedValue:this.handleInvoiceChange,selectedValue:g})]})]}),(0,u.jsxs)("div",{className:"row mt-3",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"quantity",children:"Quantity"}),(0,u.jsx)("input",{type:"number",className:"form-control",name:"quantity",id:"quantity",value:m,onChange:this.handleInputChange})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"actualquantity",children:"Actual Quantity"}),(0,u.jsx)("input",{type:"number",className:"form-control",name:"actualquantity",id:"actualquantity",value:v,onChange:this.handleInputChange})]})]}),(0,u.jsxs)("div",{className:"row mt-3",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"price",children:"Price"}),(0,u.jsx)("input",{type:"number",className:"form-control",name:"price",id:"price",value:p,onChange:this.handleInputChange})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"cost",children:"Cost"}),(0,u.jsx)("input",{type:"number",className:"form-control",name:"cost",id:"cost",value:x,onChange:this.handleInputChange})]})]}),(0,u.jsx)("div",{className:"row mt-3",children:(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)("label",{htmlFor:"received_date",children:"Received Date"}),(0,u.jsx)("input",{type:"date",className:"form-control",name:"received_date",id:"received_date",value:y,onChange:this.handleInputChange})]})})]}),(0,u.jsxs)("div",{className:"modal-footer",children:[(0,u.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"Cancel"}),(0,u.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.handleUpdate,children:"Update Inventory"})]})]})})}}const N=I;class _ extends s.Component{constructor(e){super(e),this.openUpdateInventoryModal=()=>{this.setState({showUpdateInventoryModal:!0})},this.closeUpdateInventoryModal=()=>{this.setState({showUpdateInventoryModal:!1})},this.state={showUpdateInventoryModal:!1}}render(){const{showUpdateInventoryModal:e}=this.state,{inventory:t,fetchInventory:n,modalData:s,items:a,vendors:i,uoms:o,invoices:l}=this.props;return(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{role:"button",onClick:this.openUpdateInventoryModal,className:"btn btn-primary ",title:"Edit Inventory",children:(0,u.jsx)("i",{className:"bi bi-pencil-fill"})}),t&&(0,u.jsx)(N,{show:e,onHide:this.closeUpdateInventoryModal,inventory:t,modalData:s,fetchInventory:n,items:a,vendors:i,uoms:o,invoices:l})]})}}var C=n(6178),f=n.n(C);class A extends s.Component{render(){const{inventory:e,loading:t,search:n,vendorMap:s,itemMap:a,uomMap:i,items:o,vendors:l,uoms:r,invoices:d,handleSearchChange:c,isOwner:h,currentPage:m,rowsPerPage:v,handlePageChange:p,totalInvoices:y,handleRowsPerPageChange:x,totalPages:g}=this.props;return t?(0,u.jsx)("div",{className:"w-100 text-center mt-5",children:(0,u.jsx)("div",{className:"spinner-border",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,u.jsxs)("div",{className:"container",children:[(0,u.jsxs)("div",{className:"mb-3 d-flex mt-3 justify-content-between align-items-center",children:[(0,u.jsx)("input",{type:"text",value:n,className:"form-control w-50",placeholder:"Search by Invoice no",onChange:c}),(0,u.jsxs)("button",{onClick:()=>window.print(),className:"btn btn-success",children:[(0,u.jsx)("span",{className:"bi bi-printer-fill"})," Print"]})]}),(0,u.jsxs)("div",{className:"table-responsive",children:[(0,u.jsxs)("table",{className:"table table-striped table table-bordered text-center table-striped table-responsive",children:[(0,u.jsx)("thead",{className:"bg-dark text-white",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Invoice Number"}),(0,u.jsx)("th",{children:"Item Name"}),(0,u.jsx)("th",{children:"Vendor Name"}),(0,u.jsx)("th",{children:"UOM"}),(0,u.jsx)("th",{children:"Quantity"}),(0,u.jsx)("th",{children:"Actual Quantity"}),(0,u.jsx)("th",{children:"Price"}),(0,u.jsx)("th",{children:"Cost"}),(0,u.jsx)("th",{children:"Received Date"}),(0,u.jsx)("th",{children:"Actions"})]})}),(0,u.jsx)("tbody",{children:e.length?e.map((e=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.invoice_number}),(0,u.jsx)("td",{children:a[e.item_id]||"Unknown Item"}),(0,u.jsx)("td",{children:s[e.vendor_id]||"Unknown Vendor"}),(0,u.jsx)("td",{children:i[e.uom_id]||"Unknown UOM"}),(0,u.jsx)("td",{children:e.quantity}),(0,u.jsx)("td",{children:e.actualquantity}),(0,u.jsxs)("td",{children:["\u20b9 ",e.price.toFixed(2)]}),(0,u.jsxs)("td",{children:["\u20b9 ",e.cost.toFixed(2)]}),(0,u.jsx)("td",{children:f()(e.received_date).format("MMM D, YYYY")}),(0,u.jsxs)("td",{className:"d-flex",children:[(0,u.jsx)(_,{inventory:e,fetchInventory:this.props.fetchInventory,items:o,vendors:l,uoms:r,invoices:d}),(0,u.jsx)("div",{className:"me-4"}),h&&(0,u.jsx)(j,{inventory:e,fetchInventory:this.props.fetchInventory})]})]},e.id))):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"10",className:"text-center",children:"No inventory items found"})})})]}),(0,u.jsxs)("div",{className:"row justify-content-between mt-3",children:[(0,u.jsx)("div",{className:"col-auto"}),(0,u.jsx)("div",{className:"d-flex justify-content-start",children:(0,u.jsx)("nav",{children:(0,u.jsxs)("ul",{className:"pagination",children:[(0,u.jsx)("li",{className:"page-item "+(1===m?"disabled":""),children:(0,u.jsx)("button",{className:"page-link",onClick:()=>p(m-1),children:"Previous"})}),Array.from({length:Math.ceil(y/v)},((e,t)=>(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("li",{className:"page-item "+(m===t+1?"active":""),children:(0,u.jsx)("button",{className:"page-link",onClick:()=>p(t+1),children:t+1})},t+1)}))),(0,u.jsx)("li",{className:"page-item "+(m===g?"disabled":""),children:(0,u.jsx)("button",{className:"page-link",onClick:()=>this.handlePageChange(m+1),children:"Next"})}),(0,u.jsx)("li",{children:(0,u.jsxs)("select",{className:"form-select ms-2",value:v,onChange:x,children:[(0,u.jsx)("option",{value:"10",children:"10 rows"}),(0,u.jsx)("option",{value:"15",children:"15 rows"}),(0,u.jsx)("option",{value:"20",children:"20 rows"}),(0,u.jsx)("option",{value:"25",children:"25 rows"})]})})]})})})]})]})]})}}class w extends s.Component{constructor(e){super(e),this.fetchMap=e=>e.reduce(((e,t)=>(e[null===t||void 0===t?void 0:t.id]=(null===t||void 0===t?void 0:t.itemname)||(null===t||void 0===t?void 0:t.vendorname)||(null===t||void 0===t?void 0:t.uomname),e)),{}),this.handleSearchChange=e=>{this.setState({search:e.target.value})},this.handlePageChange=e=>{this.setState({currentPage:e,loading:!0},(()=>{this.getAllInventory(e,this.state.rowsPerPage)}))},this.handleRowsPerPageChange=e=>{const t=parseInt(e.target.value,10);this.setState({rowsPerPage:t,loading:!0},(()=>{this.getAllInventory(1,t)}))},this.state={inventory:[],vendorMap:{},itemMap:{},uomMap:{},loading:!0,search:"",items:[],vendors:[],uoms:[],invoices:[],currentPage:1,rowsPerPage:10,totalInvoices:0,totalPages:1}}componentDidMount(){0===Object.keys(this.state.itemMap).length?this.fetchData().then((()=>{this.getAllInventory()})):this.getAllInventory()}getAllInventory(){const e={page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,rowsPerPage:arguments.length>1&&void 0!==arguments[1]?arguments[1]:10};m.getAllInvoiceWithPagenation(e).then((e=>{this.setState({inventory:e.data.inventory||[],loading:!1,currentPage:e.data.currentPage||1,rowsPerPage:e.data.rowsPerPage||10,totalInvoices:e.data.totalRecords||0,totalPages:e.data.totalPages||1})})).catch((e=>{console.log(e),this.setState({loading:!1,inventory:[]})}))}async fetchData(){try{var e,t,n,s,a,i,c;this.setState({loading:!0});const[h,m,u,v]=await Promise.all([o.A.getAllItems(),l.A.getAllVendors(),r.A.getAllUoms(),d.A.getAllInvoices()]),p=(null===v||void 0===v||null===(e=v.data)||void 0===e?void 0:e.invoices)||[],y=this.fetchMap(null===m||void 0===m||null===(t=m.data)||void 0===t?void 0:t.vendor),x=this.fetchMap(null===h||void 0===h||null===(n=h.data)||void 0===n?void 0:n.items),g=this.fetchMap(null===u||void 0===u||null===(s=u.data)||void 0===s?void 0:s.uom);this.setState({vendorMap:y,itemMap:x,uomMap:g,items:null===h||void 0===h||null===(a=h.data)||void 0===a?void 0:a.items,vendors:null===m||void 0===m||null===(i=m.data)||void 0===i?void 0:i.vendor,uoms:null===u||void 0===u||null===(c=u.data)||void 0===c?void 0:c.uom,invoices:p})}catch(h){console.log(h)}finally{this.setState({loading:!1})}}render(){const{isOwner:e}=this.props,{inventory:t,loading:n,search:s,vendorMap:a,itemMap:i,uomMap:o,items:l,vendors:r,uoms:d,invoices:c,currentPage:h,rowsPerPage:m,totalInvoices:v,totalPages:p}=this.state,x=t.filter((e=>{var t;return null===(t=e.invoice_number)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase())}));return n?(0,u.jsx)("div",{className:"w-100 text-center mt-5",children:(0,u.jsx)("div",{className:"spinner-border",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,u.jsxs)("div",{className:"mt-100",children:[(0,u.jsx)("h2",{className:"text-center",children:"Inventory Page"}),(0,u.jsx)(y,{fetchInventory:()=>this.getAllInventory(),items:l,vendors:r,uoms:d,invoices:c}),(0,u.jsx)(A,{inventory:x,loading:n,search:s,vendorMap:a,itemMap:i,uomMap:o,items:l,vendors:r,uoms:d,invoices:c,handleSearchChange:this.handleSearchChange,fetchInventory:()=>this.getAllInventory(),fetchData:()=>this.fetchData(),isOwner:e,totalInvoices:v,currentPage:h,rowsPerPage:m,totalPages:p,handlePageChange:this.handlePageChange,handleRowsPerPageChange:this.handleRowsPerPageChange})]})}}},3514:(e,t,n)=>{n.d(t,{_:()=>s});const s=e=>new Date(e).toISOString().split("T")[0]},2153:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(214);class a{static createInvoice(e){return s.A.post("/invoice",e)}static getAllInvoices(){return s.A.get("/invoices")}static getAllInvoiceWithPagenation(e){return s.A.post("/invoices-list",e)}static getInvoiceById(e){return s.A.get(`/invoice/${e}`)}static updateInvoice(e,t){return s.A.put(`/invoice/${e}`,t)}static deleteInvoice(e){return s.A.delete(`/invoice/${e}`)}}},1457:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(214);class a{static createItem(e){return s.A.post("/item",e)}static getAllItems(){return s.A.get("/items")}static getItemById(e){return s.A.get(`/item/${e}`)}static updateItem(e,t){return s.A.put(`/item/${e}`,t)}static deleteItem(e,t){return s.A.delete(`/item/${e}`,t)}static importFromCSV(e){return s.A.post("/importcsv",e,{headers:{"Content-Type":"multipart/form-data"}})}}},1938:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(214);class a{static createUom(e){return s.A.post("/uom",e)}static getAllUoms(){return s.A.get("/uoms")}static getUomById(e){return s.A.get(`/uom/${e}`)}static updateUom(e,t){return s.A.put(`/uom/${e}`,t)}static deleteUom(e,t){return s.A.delete(`/uom/${e}`,t)}}},2026:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(214);class a{static createVendor(e){return s.A.post("/vendor",e)}static getAllVendors(){return s.A.get("/vendors")}static getAllVendorsWithPagenation(e){return s.A.post("/vendors-list",e)}static getVendorById(e){return s.A.get(`/vendor/${e}`)}static updateVendor(e,t){return s.A.put(`/vendor/${e}`,t)}static deleteVendor(e){return s.A.delete(`/vendor/${e}`)}}}}]);
//# sourceMappingURL=178.0080003e.chunk.js.map