"use strict";(self.webpackChunkkims_frontend=self.webpackChunkkims_frontend||[]).push([[601],{7735:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);var s=a(1108),n=a(579);const l=e=>{let{showModal:t,header:a,onClose:l,onSubmit:o,isEditing:d,formData:i,setFormData:r,fields:c,items:u,uoms:m}=e;const p=e=>{r({...i,[e.target.name]:e.target.value})};return(0,n.jsx)("div",{className:"modal modal-overlay "+(t?"d-block":"d-none"),tabIndex:"-1",role:"dialog",children:(0,n.jsx)("div",{className:"modal-dialog",role:"document",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsxs)("h5",{className:"modal-title",children:[d?"Edit":"Add"," ",a]}),(0,n.jsx)("button",{type:"button",className:"btn-close",onClick:l})]}),(0,n.jsx)("div",{className:"modal-body",children:c.map(((e,t)=>{if("select"===e.type){const a="item_id"===e.name?u.map((e=>({value:e.id,label:e.itemname}))):m.map((e=>({value:e.id,label:e.uomname})));return(0,n.jsxs)("div",{className:"form-group mb-3",children:[(0,n.jsx)("label",{children:e.label}),(0,n.jsx)(s.A,{data:a,isMulti:!1,selectedValue:i[e.name],placeholder:`Select ${e.label}`,onUpdateSelectedValue:t=>{return a=e.name,s=null===t||void 0===t?void 0:t.value,void r({...i,[a]:s});var a,s}})]},t)}return(0,n.jsxs)("div",{className:"form-group mb-3",children:[(0,n.jsx)("label",{children:e.label}),(0,n.jsx)("input",{type:e.type,name:e.name,value:i[e.name]||"",onChange:p,className:"form-control"})]},t)}))}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>o(i),children:d?"Update":"Save"})]})]})})})}},1108:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(5043),n=a(249),l=a(579);class o extends s.Component{constructor(e){super(e),this.handleChange=e=>{this.setState({selectedValue:e}),this.props.onUpdateSelectedValue(e)},this.state={selectedValue:this.props.selectedValue||(this.props.isMulti?[]:"")}}componentDidUpdate(e){e.selectedValue!==this.props.selectedValue&&this.setState({selectedValue:this.props.selectedValue||(this.props.isMulti?[]:"")})}render(){const{selectedValue:e}=this.state,{data:t,placeholder:a,width:s,placeholderColor:o,menuPlacement:d,isMulti:i}=this.props;return(0,l.jsx)("div",{className:"DropDownList m-1 "+(s?`w-${s}`:""),children:(0,l.jsx)(n.Ay,{className:"dropdown",placeholder:a,value:e,options:t,onChange:this.handleChange,isMulti:i,isClearable:!0,styles:{control:e=>({...e,cursor:"pointer"}),placeholder:e=>({...e,color:o||"#6c757d"}),menu:e=>({...e,overflow:"hidden"}),menuList:e=>({...e,maxHeight:200,overflowY:"auto"})},menuPlacement:d||"auto"})})}}const d=o},1246:(e,t,a)=>{a.d(t,{p:()=>l});var s=a(6178),n=a.n(s);const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=n()(e);if(!a.isValid())return"Invalid Date";const s=t?"MMM D, YYYY h:mm A":"MMM D, YYYY";return a.format(s)}},9601:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(5043),n=a(214),l=a(5030),o=a(7735),d=a(1036),i=a(1246),r=a(579);const c=()=>{const[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)(1),[v,y]=(0,s.useState)(10),[g,b]=(0,s.useState)(""),[C,x]=(0,s.useState)(0),[f,S]=(0,s.useState)({date:"",adults_count:"",children_count:""});(0,s.useEffect)((()=>{j()}),[p,v,g]);const j=async()=>{try{const e=await n.A.post("/getconsumption-days",{page:p,pageSize:v});t(e.data.consumptionDays),x(e.data.pagination.totalRecords)}catch(s){var e,a;d.oR.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Something went wrong!")}},D=(0,s.useCallback)(((e,t)=>{let a;return function(){for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];clearTimeout(a),a=setTimeout((()=>e.apply(this,n)),t)}})((async e=>{if(e)try{const{data:a}=await n.A.post("/getconsumption-date",{date:e,page:p,pageSize:v});t(a.consumptionDays),x(a.pagination.totalRecords)}catch(l){var a,s;d.oR.error((null===(a=l.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Error searching consumption days!")}else j()}),500),[p,v]),w=[{key:"date",label:"Date",render:e=>(0,i.p)(e)},{key:"adults_count",label:"Adults Count"},{key:"children_count",label:"Children Count"}];return(0,r.jsxs)("div",{style:{marginTop:"20vh"},className:"container",children:[(0,r.jsx)("h2",{className:"text-center",children:"Consumption Days"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:"btn btn-primary mb-3",onClick:()=>m(!0),children:"Add Consumption Day"}),u&&(0,r.jsx)(o.A,{showModal:u,header:"Daily Consumption",onClose:()=>{m(!1),S({}),c(null)},onSubmit:async e=>{try{var t,s;const l=new Date(e.date),o={...e,date:l};let i;i=a?await n.A.put(`/consumption-days/${a.id}`,o):await n.A.post("/consumption-days",o),j(),m(!1),c(null),d.oR.success((null===(t=i)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Consumption day saved successfully!")}catch(i){var l,o;d.oR.error((null===(l=i.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||"Error saving the consumption day!")}},isEditing:null!==a,formData:f,setFormData:S,fields:[{name:"date",label:"Date",type:"date",required:!0},{name:"adults_count",label:"Adults Count",type:"number",required:!0},{name:"children_count",label:"Children Count",type:"number",required:!0}]}),(0,r.jsx)(l.A,{data:e,columns:w,onEdit:e=>{const t=new Date(e.date);t.setDate(t.getDate()),c({...e,date:t.toISOString().split("T")[0]}),S({date:t.toISOString().split("T")[0],adults_count:e.adults_count,children_count:e.children_count}),m(!0)},onDelete:async e=>{try{await n.A.delete(`/consumption-days/${e}`);j(),d.oR.success("Consumption day deleted successfully!")}catch(s){var t,a;d.oR.error((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Error deleting consumption day!")}},currentPage:p,rowsPerPage:v,handleRowsPerPageChange:e=>{y(e)},onPageChange:e=>{h(e)},handleSearch:e=>{b(e),D(e)},showSearch:!0,totalItems:C,pagenation:!0,Action:!0,placeholder:"YYYY-MM-DD"})]})]})}}}]);
//# sourceMappingURL=601.c767f48a.chunk.js.map