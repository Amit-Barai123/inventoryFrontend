"use strict";(self.webpackChunkkims_frontend=self.webpackChunkkims_frontend||[]).push([[161],{250:(e,s,i)=>{i.d(s,{A:()=>r});var c=i(5043),a=i(214),l=i(1036),t=i(579);const r=e=>{let{recipes:s,onSelectRecipe:i,fetchRecipes:r,deleteButtons:n}=e;const[o,d]=(0,c.useState)(null),m=s.reduce(((e,s)=>{const i=s.RecipeCategory.category;return e[i]||(e[i]=[]),e[i].push(s),e}),{});return(0,t.jsx)("div",{className:"accordion",id:"recipeAccordion",children:Object.keys(m).map(((e,s)=>(0,t.jsxs)("div",{className:"accordion-item",children:[(0,t.jsx)("h2",{className:"accordion-header",id:`heading-${s}`,children:(0,t.jsx)("button",{className:"accordion-button "+(o===e?"":"collapsed"),type:"button",onClick:()=>(e=>{d(o===e?null:e)})(e),"aria-expanded":o===e,"aria-controls":`collapse-${s}`,children:e})}),(0,t.jsx)("div",{id:`collapse-${s}`,className:"accordion-collapse collapse "+(o===e?"show":""),"aria-labelledby":`heading-${s}`,"data-bs-parent":"#recipeAccordion",children:(0,t.jsx)("div",{className:"accordion-body",children:(0,t.jsx)("ul",{className:"list-group",children:m[e].map((e=>(0,t.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,t.jsx)("span",{children:e.recipe_name}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{className:"btn btn-primary me-2",onClick:()=>i(e),children:(0,t.jsx)("i",{className:"bi bi-eye"})}),!0===n&&(0,t.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{try{const{data:s}=await a.A.delete(`/recipe/${e}`);console.log(`the data of deleting is ${s}`),r(),s.success?l.oR.success(s.success.message||s.message):l.oR.error(s.error.message||s.error)}catch(s){console.error("Error deleting recipe:",s.message)}})(e.id),children:(0,t.jsx)("i",{className:"bi bi-trash"})})]})]},e.id)))})})})]},s)))})}},6156:(e,s,i)=>{i.d(s,{A:()=>l});var c=i(5043),a=i(214);function l(){const[e,s]=(0,c.useState)([]);return(0,c.useEffect)((()=>{(async()=>{try{const{data:e}=await a.A.get("/categories");s(e.categories)}catch(e){console.log(e)}})()}),[]),e}},3161:(e,s,i)=>{i.r(s),i.d(s,{default:()=>m});var c=i(5043),a=i(250),l=i(1036),t=i(214),r=i(6156),n=i(579);const o=e=>{let{recipe:s,fetchRecipes:i,onClose:a}=e;const[o,d]=(0,c.useState)({recipe_name:(null===s||void 0===s?void 0:s.recipe_name)||"",description:(null===s||void 0===s?void 0:s.description)||"",instructions:(null===s||void 0===s?void 0:s.instructions)||"",comments:(null===s||void 0===s?void 0:s.comments)||"",is_lc_recipe:(null===s||void 0===s?void 0:s.is_lc_recipe)||!1,category_id:(null===s||void 0===s?void 0:s.category_id)||"",videoUrls:(null===s||void 0===s?void 0:s.videoUrls)||[]}),[m,h]=(0,c.useState)([]),[p,x]=(0,c.useState)(null),[u,j]=(0,c.useState)(null),b=(0,r.A)();(0,c.useEffect)((()=>{v()}),[]);const v=async()=>{h(b)},N=e=>{const{name:s,value:i,type:c,checked:a}=e.target;d((e=>({...e,[s]:"checkbox"===c?a:i})))};return(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const c=new FormData;c.append("recipe_name",o.recipe_name),c.append("description",o.description),c.append("instructions",o.instructions),c.append("comments",o.comments),c.append("is_lc_recipe",o.is_lc_recipe),c.append("category_id",o.category_id),o.videoUrls.forEach((e=>{c.append("videoUrls[]",e)})),p&&Array.from(p).forEach((e=>{c.append("thumbnail",e)})),u&&Array.from(u).forEach((e=>{c.append("image",e)}));try{const e=s?`/recipe/${s.id}`:"/recipe",r=s?t.A.put:t.A.post;await r(e,c,{headers:{"Content-Type":"multipart/form-data"}}),console.log(`the method is ${r}`),l.oR.success("Recipe submitted successfully!"),i(),a()}catch(r){console.error("Error submitting recipe:",r),l.oR.error("Error submitting recipe!")}},className:"recipe-form p-4 mt-4",children:[(0,n.jsx)("h4",{className:"mb-3",children:s?"Edit Recipe":"Add Recipe"}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"recipe_name",className:"form-label",children:"Recipe Name"}),(0,n.jsx)("input",{type:"text",className:"form-control",id:"recipe_name",name:"recipe_name",value:o.recipe_name,onChange:N,required:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,n.jsx)("textarea",{className:"form-control",id:"description",name:"description",value:o.description,onChange:N,rows:"3"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"instructions",className:"form-label",children:"Instructions"}),(0,n.jsx)("textarea",{className:"form-control",id:"instructions",name:"instructions",value:o.instructions,onChange:N,rows:"4"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"comments",className:"form-label",children:"Comments"}),(0,n.jsx)("textarea",{className:"form-control",id:"comments",name:"comments",value:o.comments,onChange:N})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"category_id",className:"form-label",children:"Category"}),(0,n.jsxs)("select",{className:"form-select",id:"category_id",name:"category_id",value:o.category_id,onChange:N,required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select Category"}),b.map((e=>(0,n.jsx)("option",{value:e.id,children:e.category},e.id)))]})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"is_lc_recipe",className:"form-label",children:"Is LC Recipe?"}),(0,n.jsx)("input",{type:"checkbox",id:"is_lc_recipe",name:"is_lc_recipe",checked:o.is_lc_recipe,onChange:N})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"thumbnail",className:"form-label",children:"Thumbnail"}),(0,n.jsx)("input",{type:"file",className:"form-control",id:"thumbnail",name:"thumbnail",accept:"image/*",multiple:!0,onChange:e=>x(e.target.files)}),(0,n.jsx)("div",{className:"d-flex flex-wrap mt-2",children:p&&Array.from(p).map(((e,s)=>(0,n.jsxs)("div",{className:"d-flex flex-column ",children:[(0,n.jsx)("img",{src:URL.createObjectURL(e),alt:"Thumbnail Preview",className:"me-2",width:100,height:100},s),(0,n.jsx)("div",{className:"mx-auto",children:(0,n.jsx)("button",{className:"btn btn-danger  mt-3",onClick:()=>{return s=e,void x((e=>Array.from(e).filter((e=>e!==s))));var s},children:"Remove"})})]})))})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"image",className:"form-label",children:"Image"}),(0,n.jsx)("input",{type:"file",className:"form-control",id:"image",name:"image",accept:"image/*",multiple:!0,onChange:e=>j(e.target.files)}),(0,n.jsx)("div",{className:"d-flex flex-wrap mt-2",children:u&&Array.from(u).map(((e,s)=>(0,n.jsxs)("div",{className:"d-flex flex-column ",children:[(0,n.jsx)("img",{src:URL.createObjectURL(e),alt:"Thumbnail Preview",className:"me-2",width:100,height:100},s),(0,n.jsx)("div",{className:"mx-auto",children:(0,n.jsx)("button",{className:"btn btn-danger  mt-3",onClick:()=>{return s=e,void j((e=>Array.from(e).filter((e=>e!==s))));var s},children:"Remove"})})]})))})]}),(0,n.jsxs)("div",{className:"mb-3",children:[o.videoUrls.map(((e,s)=>(0,n.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,n.jsx)("input",{type:"text",className:"form-control me-2",value:e,onChange:e=>((e,s)=>{const i=[...o.videoUrls];i[e]=s,d({...o,videoUrls:i})})(s,e.target.value),placeholder:"Enter YouTube video URL"}),(0,n.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>(e=>{const s=o.videoUrls.filter(((s,i)=>i!==e));d({...o,videoUrls:s})})(s),children:"Remove"})]},s))),(0,n.jsxs)("button",{type:"button",className:"btn btn-success mt-2",onClick:()=>{d((e=>({...e,videoUrls:[...e.videoUrls,""]})))},children:["Add Video URL ",(0,n.jsx)("span",{className:"bi bi-youtube"})]})]}),(0,n.jsx)("div",{className:"mb-3",children:o.videoUrls.map(((e,s)=>e&&(0,n.jsx)("iframe",{width:"100%",height:"200",src:e.replace("watch?v=","embed/"),title:`video-${s}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"mb-3"},s)))}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",children:s?"Update Recipe":"Submit Recipe"})]})},d=e=>{var s;let{recipe:i,onEdit:c}=e;return(0,n.jsxs)("div",{className:"recipe-details mt-4 p-3 border rounded",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"text-center mb-1 text-success",children:i.recipe_name}),(0,n.jsxs)("div",{className:"d-flex justify-content-between mt-5",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Category:"})," ",(null===i||void 0===i||null===(s=i.RecipeCategory)||void 0===s?void 0:s.category)||"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("i",{children:"LCP Recipe:"})," ",i.is_lc_recipe?"Yes":"No"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-center",children:(0,n.jsx)("strong",{children:"Description"})}),(0,n.jsx)("p",{children:i.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-center",children:(0,n.jsx)("strong",{children:"Instructions"})}),(0,n.jsx)("p",{children:i.instructions})]}),i.media&&i.media.length>0?(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"d-flex flex-wrap justify-content-between",children:[(0,n.jsxs)("div",{className:"media-section mb-4",style:{flexBasis:"100%"},children:[(0,n.jsx)("h3",{className:"text-center",children:"Thumbnail"}),(0,n.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:i.media.map(((e,s)=>e.thumbnail_url&&(0,n.jsx)("div",{className:"m-2",style:{maxWidth:"350px",flex:"1 0 22%"},children:(0,n.jsx)("iframe",{src:e.thumbnail_url,className:"img-fluid",alt:`Thumbnail ${s+1}`,style:{objectFit:"cover",height:"250px",width:"100%"}})},e.id)))})]}),(0,n.jsxs)("div",{className:"media-section mb-4",style:{flexBasis:"100%"},children:[(0,n.jsx)("h3",{className:"text-center",children:"Image"}),(0,n.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:i.media.map(((e,s)=>e.image_url&&(0,n.jsx)("div",{className:"m-2",style:{maxWidth:"350px",flex:"1 0 22%"},children:(0,n.jsx)("iframe",{src:e.image_url,className:"img-fluid",alt:`Image ${s+1}`,style:{objectFit:"cover",height:"250px",width:"100%"}})},e.id)))})]}),(0,n.jsxs)("div",{className:"media-section mb-4",style:{flexBasis:"100%"},children:[(0,n.jsx)("h3",{className:"text-center",children:"Video"}),(0,n.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:i.media.map(((e,s)=>e.video_url&&(0,n.jsx)("div",{className:"m-2",style:{flex:"1 0 48%"},children:(0,n.jsx)("iframe",{width:"100%",height:"300",src:e.video_url.replace("watch?v=","embed/"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`Video ${s+1}`})},e.id)))})]})]})})}):(0,n.jsx)("p",{children:"No media available."}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("p",{className:"text-center mt-12",children:(0,n.jsx)("strong",{children:"Comments"})}),(0,n.jsx)("p",{children:i.comments})]}),(0,n.jsxs)("button",{className:"btn btn-primary mt-4",onClick:()=>c(i),children:[(0,n.jsx)("i",{className:"bi bi-pencil"})," Edit"]})]})},m=()=>{const[e,s]=(0,c.useState)([]),[i,l]=(0,c.useState)(null),[r,m]=(0,c.useState)(!1),h=async()=>{try{const{data:e}=await t.A.get("/recipes");s(e.recipes)}catch(e){console.error("Error fetching recipes:",e.message)}};return(0,c.useEffect)((()=>{h()}),[]),(0,n.jsxs)("div",{className:"container mt-100",children:[(0,n.jsx)("h2",{className:"text-center",children:"Recipe page"}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-md-4 mb-5",children:[(0,n.jsx)("button",{className:"btn btn-primary mt-3 ",onClick:()=>{l(null),m(!0)},children:"+ Create Recipe"}),(0,n.jsx)(a.A,{recipes:e,deleteButtons:!0,onSelectRecipe:e=>{l(e),m(!1)},fetchRecipes:h})]}),(0,n.jsx)("div",{className:"col-md-8 mt-5",children:r?(0,n.jsx)(o,{recipe:i,fetchRecipes:h,onClose:()=>m(!1)}):i?(0,n.jsx)(d,{recipe:i,onEdit:()=>m(!0)}):(0,n.jsx)("h6",{className:"text-center mt-5 text-bold",children:"Select a recipe to view details or create a new one."})})]})]})}}}]);
//# sourceMappingURL=161.4b441903.chunk.js.map