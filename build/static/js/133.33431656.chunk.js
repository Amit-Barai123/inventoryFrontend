"use strict";(self.webpackChunkkims_frontend=self.webpackChunkkims_frontend||[]).push([[133],{3133:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var r=s(5043),l=s(1036),n=s(184),t=s(214),i=(s(7990),s(579));const m=()=>{const[e,a]=(0,r.useState)(null),[s,m]=(0,r.useState)({name:"",email:"",username:"",password:""}),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)({});(0,r.useEffect)((()=>{const e=localStorage.getItem("auth");if(e){const s=JSON.parse(e);a(s.user.id)}}),[]),(0,r.useEffect)((()=>{e&&p()}),[e]);const p=async()=>{try{const a=(await t.A.get(`/users/${e}`)).data;m({name:a.name||"",email:a.email||"",username:a.username||"",password:a.password||""})}catch(a){l.oR.error("Error loading user data")}},h=e=>{m({...s,[e.target.name]:e.target.value})};return(0,i.jsx)("div",{className:"d-flex mt-100 justify-content-center align-items-center vh-100 mb-5",children:(0,i.jsx)("div",{className:"col-lg-4 col-md-6 col-sm-8 p-4 bg-light bg-white shadow rounded-3",children:(0,i.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{let e={},a=!0;return s.name.trim()||(e.name="Name is required.",a=!1),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(e.email="Invalid email format.",a=!1):(e.email="Email is required.",a=!1),s.username.trim()||(e.username="Username is required.",a=!1),s.password&&s.password.length<6&&(e.password="Password must be at least 6 characters.",a=!1),u(e),a})())try{const e=await t.A.put("/update-profile",s);l.oR.success(e.data.message)}catch(n){var a,r;l.oR.error((null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Error updating profile")}},children:[(0,i.jsx)("div",{className:"text-center mb-3",children:(0,i.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"rounded-circle",height:"80"})}),(0,i.jsx)("h3",{className:"text-center",children:"Update Profile"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Name"}),(0,i.jsx)("input",{type:"text",name:"name",value:s.name,onChange:h,className:"form-control "+(d.name?"is-invalid":""),placeholder:"Enter your name"}),(0,i.jsx)("div",{className:"invalid-feedback",children:d.name})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Email"}),(0,i.jsx)("input",{type:"email",name:"email",value:s.email,onChange:h,className:"form-control "+(d.email?"is-invalid":""),placeholder:"Enter your email"}),(0,i.jsx)("div",{className:"invalid-feedback",children:d.email})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Username"}),(0,i.jsx)("input",{type:"text",name:"username",value:s.username,onChange:h,className:"form-control "+(d.username?"is-invalid":""),placeholder:"Enter your username"}),(0,i.jsx)("div",{className:"invalid-feedback",children:d.username})]}),(0,i.jsxs)("div",{className:"mb-3 position-relative",children:[(0,i.jsx)("label",{className:"form-label",children:"New Password (Optional)"}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("input",{type:o?"text":"password",name:"password",value:s.password,onChange:h,className:"form-control "+(d.password?"is-invalid":""),placeholder:"Enter new password"}),(0,i.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{c(!o)},style:{border:"none",background:"transparent",position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:"pointer"},children:o?(0,i.jsx)(n.Ny1,{}):(0,i.jsx)(n.mx3,{})})]}),(0,i.jsx)("div",{className:"invalid-feedback",children:d.password})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"Update Profile"})]})})})}},7990:()=>{}}]);
//# sourceMappingURL=133.33431656.chunk.js.map