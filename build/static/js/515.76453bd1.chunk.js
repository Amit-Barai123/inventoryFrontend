"use strict";(self.webpackChunkkims_frontend=self.webpackChunkkims_frontend||[]).push([[515],{9557:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var n=s(5043),a=s(8087),r=s(1036),o=s(2026),l=s(579);class d extends n.Component{constructor(e){super(e),this.resetForm=()=>{this.setState({vendorname:"",address:"",city:"",state:"",country:"",pincode:"",gstnumber:"",contactnumber:"",email:"",altcontactnumber:""})},this.handleInputChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleCreate=async()=>{const{getAllVendors:e}=this.props,{vendorname:t,address:s,city:n,state:a,country:l,pincode:d,gstnumber:c,contactnumber:i,email:h,altcontactnumber:m}=this.state,u={vendorname:t,address:s,city:n,state:a,country:l,pincode:d,gstnumber:c,contactnumber:i,email:h,altcontactnumber:m};try{await o.A.createVendor(u),e(),this.resetForm(),r.oR.success("Vendor created successfully"),this.props.onHide()}catch(p){console.log(p),r.oR.error("Failed to create vendor.")}},this.state={vendorname:"",address:"",city:"",state:"",country:"",pincode:"",gstnumber:"",contactnumber:"",email:"",altcontactnumber:""}}render(){const{show:e,onHide:t}=this.props,{vendorname:s,address:n,city:r,state:o,country:d,pincode:c,gstnumber:i,contactnumber:h,email:m,altcontactnumber:u}=this.state;return(0,l.jsx)(a.A,{show:e,onHide:t,centered:!0,children:(0,l.jsxs)("div",{className:"modal-content",style:{width:"600px"},children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",children:"Create Vendor"}),(0,l.jsx)("button",{type:"button",className:"btn-close",onClick:t})]}),(0,l.jsx)("div",{className:"modal-body",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"vendorname",className:"mb-2",children:"Vendor Name"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"vendorname",id:"vendorname",placeholder:"Enter Vendor Name",value:s,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"city",className:"mb-2",children:"City"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"city",id:"city",placeholder:"Enter City",value:r,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"country",className:"mb-2",children:"Country"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"country",id:"country",placeholder:"Enter Country",value:d,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"gstnumber",className:"mb-2",children:"GST Number"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"gstnumber",id:"gstnumber",placeholder:"Enter GST Number",value:i,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"altcontactnumber",className:"mb-2",children:"Alternate Contact Number"}),(0,l.jsx)("input",{type:"number",className:"form-control",name:"altcontactnumber",id:"altcontactnumber",placeholder:"Enter Alternate Contact Number",value:u,onChange:this.handleInputChange})]})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("div",{className:"form-group mt-3 mt-md-0",children:[(0,l.jsx)("label",{htmlFor:"address",className:"mb-2",children:"Address"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"address",id:"address",placeholder:"Enter Address",value:n,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"state",className:"mb-2",children:"State"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"state",id:"state",placeholder:"Enter State",value:o,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"pincode",className:"mb-2",children:"Pincode"}),(0,l.jsx)("input",{type:"number",className:"form-control",name:"pincode",id:"pincode",placeholder:"Enter Pincode",value:c,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"contactnumber",className:"mb-2",children:"Contact Number"}),(0,l.jsx)("input",{type:"number",className:"form-control",name:"contactnumber",id:"contactnumber",placeholder:"Enter Contact Number",value:h,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"email",className:"mb-2",children:"Email"}),(0,l.jsx)("input",{type:"email",className:"form-control",name:"email",id:"email",placeholder:"Enter Email",value:m,onChange:this.handleInputChange})]})]})]})}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Cancel"}),(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.handleCreate,children:"Create Vendor"})]})]})})}}const c=d;class i extends n.Component{constructor(e){super(e),this.openVendorModal=()=>{this.setState({showVendorModal:!0})},this.closeVendorModal=()=>{this.setState({showVendorModal:!1})},this.state={showVendorModal:!1}}render(){const{showVendorModal:e}=this.state,{getAllVendors:t}=this.props;return(0,l.jsx)("div",{className:"container  justify-content-center",children:(0,l.jsxs)("div",{className:" d-flex justify-content-start",children:[(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>this.openVendorModal(),children:"Create Vendor"}),(0,l.jsx)(c,{show:e,onHide:this.closeVendorModal,getAllVendors:t})]})})}}var h=s(4282);class m extends n.Component{render(){const{show:e,onHide:t,onDelete:s,vendor:n}=this.props;return(0,l.jsxs)(a.A,{show:e,onHide:t,children:[(0,l.jsx)(a.A.Header,{closeButton:!0,children:(0,l.jsx)(a.A.Title,{children:"Delete Vendor"})}),(0,l.jsx)(a.A.Body,{children:(0,l.jsxs)("p",{children:["Are you sure you want to delete the Vendor ",(0,l.jsx)("strong",{children:null===n||void 0===n?void 0:n.vendorname}),"?"]})}),(0,l.jsxs)(a.A.Footer,{children:[(0,l.jsx)(h.A,{variant:"secondary",onClick:t,children:"Cancel"}),(0,l.jsx)(h.A,{variant:"danger",onClick:s,children:"Delete"})]})]})}}class u extends n.Component{constructor(e){super(e),this.openDeleteModal=()=>{this.setState({showDeleteModal:!0})},this.closeDeleteModal=()=>{this.setState({showDeleteModal:!1})},this.handleDelete=async()=>{const{vendor:e,fetchVendors:t}=this.props;try{await o.A.deleteVendor(e.id),r.oR.success(`Vendor ${e.vendorname} deleted successfully`),this.closeDeleteModal(),t()}catch(s){s.response&&s.response.data.error.includes("violates foreign key constraint")?(this.closeDeleteModal(),r.oR.error("Vendor cannot be deleted as it is connected to others.")):r.oR.error("Failed to delete Vendor"),console.error(s)}},this.state={showDeleteModal:!1}}render(){const{showDeleteModal:e}=this.state,{vendor:t}=this.props;return(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{role:"button",className:"btn btn-danger ",title:"Delete UOM",onClick:this.openDeleteModal,children:(0,l.jsx)("i",{className:"bi bi-trash-fill"})}),(0,l.jsx)(m,{show:e,onHide:this.closeDeleteModal,onDelete:this.handleDelete,vendor:t})]})}}class p extends n.Component{constructor(e){super(e),this.loadVendorData=()=>{const{vendor:e}=this.props;e&&this.setState({vendorname:e.vendorname,address:e.address,city:e.city,state:e.state,country:e.country,pincode:e.pincode,gstnumber:e.gstnumber,contactnumber:e.contactnumber,email:e.email,altcontactnumber:e.altcontactnumber})},this.resetForm=()=>{this.setState({vendorname:"",address:"",city:"",state:"",country:"",pincode:"",gstnumber:"",contactnumber:"",email:"",altcontactnumber:""})},this.handleInputChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleUpdate=async()=>{const{fetchVendors:e,vendor:t}=this.props,{vendorname:s,address:n,city:a,state:l,country:d,pincode:c,gstnumber:i,contactnumber:h,email:m,altcontactnumber:u}=this.state,p={vendorname:s,address:n,city:a,state:l,country:d,pincode:c,gstnumber:i,contactnumber:h,email:m,altcontactnumber:u};try{await o.A.updateVendor(t.id,p),e(),this.resetForm(),r.oR.success("Vendor updated successfully"),this.props.onHide()}catch(x){console.log(x),r.oR.error("Failed to update vendor.")}},this.state={vendorname:"",address:"",city:"",state:"",country:"",pincode:"",gstnumber:"",contactnumber:"",email:"",altcontactnumber:""}}componentDidMount(){this.loadVendorData()}componentDidUpdate(e){e.vendor!==this.props.vendor&&this.loadVendorData()}render(){const{show:e,onHide:t}=this.props,{vendorname:s,address:n,city:r,state:o,country:d,pincode:c,gstnumber:i,contactnumber:h,email:m,altcontactnumber:u}=this.state;return(0,l.jsx)(a.A,{show:e,onHide:t,centered:!0,children:(0,l.jsxs)("div",{className:"modal-content",style:{width:"600px"},children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",children:"Update Vendor"}),(0,l.jsx)("button",{type:"button",className:"btn-close",onClick:t})]}),(0,l.jsxs)("div",{className:"modal-body mb-3",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"vendorname",className:"mb-2",children:"Vendor Name"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"vendorname",id:"vendorname",placeholder:"Enter Vendor Name",value:s,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"address",className:"mb-2",children:"Address"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"address",id:"address",placeholder:"Enter Address",value:n,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"city",className:"mb-2",children:"City"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"city",id:"city",placeholder:"Enter City",value:r,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"state",className:"mb-2",children:"State"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"state",id:"state",placeholder:"Enter State",value:o,onChange:this.handleInputChange})]})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("div",{className:"form-group mt-3 mt-md-0",children:[(0,l.jsx)("label",{htmlFor:"country",className:"mb-2",children:"Country"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"country",id:"country",placeholder:"Enter Country",value:d,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"pincode",className:"mb-2",children:"Pincode"}),(0,l.jsx)("input",{type:"number",className:"form-control",name:"pincode",id:"pincode",placeholder:"Enter Pincode",value:c,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"gstnumber",className:"mb-2",children:"GST Number"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"gstnumber",id:"gstnumber",placeholder:"Enter GST Number",value:i,onChange:this.handleInputChange})]}),(0,l.jsxs)("div",{className:"form-group mt-3",children:[(0,l.jsx)("label",{htmlFor:"contactnumber",className:"mb-2",children:"Contact Number"}),(0,l.jsx)("input",{type:"number",className:"form-control",name:"contactnumber",id:"contactnumber",placeholder:"Enter Contact Number",value:h,onChange:this.handleInputChange})]})]})]}),(0,l.jsxs)("div",{className:"row mt-3",children:[(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"email",className:"mb-2",children:"Email"}),(0,l.jsx)("input",{type:"email",className:"form-control",name:"email",id:"email",placeholder:"Enter Email",value:m,onChange:this.handleInputChange})]})}),(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"altcontactnumber",className:"mb-2",children:"Alternate Contact Number"}),(0,l.jsx)("input",{type:"number",className:"form-control",name:"altcontactnumber",id:"altcontactnumber",placeholder:"Enter Alternate Contact Number",value:u,onChange:this.handleInputChange})]})})]})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Cancel"}),(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.handleUpdate,children:"Update Vendor"})]})]})})}}const x=p;class b extends n.Component{constructor(e){super(e),this.openUpdateVendorModal=()=>{this.setState({showUpdateVendorModal:!0})},this.closeUpdateVendorModal=()=>{this.setState({showUpdateVendorModal:!1})},this.state={showUpdateVendorModal:!1}}render(){const{showUpdateVendorModal:e}=this.state,{vendor:t,fetchVendors:s}=this.props;return(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{role:"button",onClick:this.openUpdateVendorModal,className:"btn btn-primary me-2",title:"Edit Vendor",children:(0,l.jsx)("i",{className:"bi bi-pencil-fill"})}),t&&(0,l.jsx)(x,{show:e,onHide:this.closeUpdateVendorModal,vendor:t,fetchVendors:s})]})}}class j extends n.Component{constructor(e){super(e),this.handleSearchChange=e=>{this.setState({search:e.target.value})},this.handlePrint=()=>{window.print()},this.handlePageChange=e=>{this.setState({loading:!0}),this.getAllVendors(e)},this.handleRowsPerPageChange=e=>{this.setState({rowsPerPage:e,currentPage:1,loading:!0},(()=>{this.getAllVendors(1)}))},this.state={vendors:[],loading:!0,search:"",currentPage:1,rowsPerPage:10,totalPages:0,totalVendors:0}}componentDidMount(){this.getAllVendors()}getAllVendors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const{rowsPerPage:t}=this.state,s={page:e,rowsPerPage:t};o.A.getAllVendorsWithPagenation(s).then((e=>{const{vendors:t,pagination:s}=e.data;this.setState({vendors:t||[],loading:!1,currentPage:s.currentPage,totalPages:s.totalPages,totalVendors:s.totalVendors})})).catch((e=>{console.log(e),this.setState({loading:!1})}))}renderPagination(){const{currentPage:e,totalPages:t,rowsPerPage:s}=this.state,n=Array.from({length:t},((e,t)=>t+1));return(0,l.jsx)("div",{children:(0,l.jsx)("nav",{"aria-label":"Vendor pagination",className:"mt-3",children:(0,l.jsxs)("ul",{className:"pagination justify-content-center",children:[(0,l.jsx)("li",{className:"page-item "+(1===e?"disabled":""),children:(0,l.jsx)("button",{className:"page-link",onClick:()=>this.handlePageChange(e-1),children:"Previous"})}),n.map((t=>(0,l.jsx)("li",{className:"page-item "+(t===e?"active":""),children:(0,l.jsx)("button",{className:"page-link",onClick:()=>this.handlePageChange(t),children:t})},t))),(0,l.jsx)("li",{className:"page-item "+(e===t?"disabled":""),children:(0,l.jsx)("button",{className:"page-link",onClick:()=>this.handlePageChange(e+1),children:"Next"})}),(0,l.jsx)("li",{children:(0,l.jsxs)("select",{className:"form-select ms-2 w-auto",value:s,onChange:e=>this.handleRowsPerPageChange(parseInt(e.target.value,10)),children:[(0,l.jsx)("option",{value:10,children:"10 rows"}),(0,l.jsx)("option",{value:15,children:"15 rows"}),(0,l.jsx)("option",{value:20,children:"20 rows"}),(0,l.jsx)("option",{value:25,children:"25 rows"})]})})]})})})}render(){const{vendors:e,loading:t,search:s,totalVendors:n}=this.state,{isOperator:a,isAdmin:r,isOwner:o}=this.props,d=e.filter((e=>{var t;return null===(t=e.vendorname)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase())}));return t?(0,l.jsx)("div",{className:"w-100 text-center mt-5",children:(0,l.jsx)("div",{className:"spinner-border",role:"status",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"mb-3 d-flex mt-3 justify-content-between align-items-center",children:[(0,l.jsx)("input",{type:"text",className:"form-control w-50",placeholder:"Search Vendors by name",onChange:this.handleSearchChange}),(0,l.jsxs)("button",{onClick:this.handlePrint,className:"btn btn-success",children:[(0,l.jsx)("span",{className:"bi bi-printer-fill"})," Print"]})]}),(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"table table-striped table table-bordered text-center table-striped table-responsive",children:[(0,l.jsx)("thead",{className:"bg-dark text-white",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Vendor Name"}),(0,l.jsx)("th",{children:"Address"}),(0,l.jsx)("th",{children:"City"}),(0,l.jsx)("th",{children:"State"}),(0,l.jsx)("th",{children:"Country"}),(0,l.jsx)("th",{children:"Pincode"}),(0,l.jsx)("th",{children:"GST Number"}),(0,l.jsx)("th",{children:"Contact"}),(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Alt Contact"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:d.length?d.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.vendorname}),(0,l.jsx)("td",{children:e.address}),(0,l.jsx)("td",{children:e.city}),(0,l.jsx)("td",{children:e.state}),(0,l.jsx)("td",{children:e.country}),(0,l.jsx)("td",{children:e.pincode}),(0,l.jsx)("td",{children:e.gstnumber}),(0,l.jsx)("td",{children:e.contactnumber}),(0,l.jsx)("td",{children:e.email}),(0,l.jsx)("td",{children:e.altcontactnumber}),(0,l.jsxs)("td",{className:"d-flex",children:[(0,l.jsx)(b,{vendor:e,fetchVendors:()=>this.getAllVendors()}),(0,l.jsx)("div",{className:"me-4"}),o&&(0,l.jsx)(u,{vendor:e,fetchVendors:()=>this.getAllVendors()})]})]},e.id))):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"11",className:"text-center",children:"No vendors found"})})})]})}),(0,l.jsx)("div",{className:"d-flex justify-content-start",children:n>0&&this.renderPagination()})]})}}class g extends n.Component{constructor(e){super(e),this.getAllVendors=()=>{this.getAllVendorsRef.current&&this.getAllVendorsRef.current.getAllVendors()},this.getAllVendorsRef=n.createRef()}render(){const{isOperator:e,isAdmin:t,isOwner:s}=this.props;return(0,l.jsxs)("div",{className:"mt-100",children:[(0,l.jsx)("h2",{className:"text-center",children:"Vendors Page"}),(0,l.jsx)(i,{getAllVendors:this.getAllVendors}),(0,l.jsx)(j,{ref:this.getAllVendorsRef,isOperator:e,isAdmin:t,isOwner:s})]})}}},2026:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(214);class a{static createVendor(e){return n.A.post("/vendor",e)}static getAllVendors(){return n.A.get("/vendors")}static getAllVendorsWithPagenation(e){return n.A.post("/vendors-list",e)}static getVendorById(e){return n.A.get(`/vendor/${e}`)}static updateVendor(e,t){return n.A.put(`/vendor/${e}`,t)}static deleteVendor(e){return n.A.delete(`/vendor/${e}`)}}},3662:(e,t,s)=>{function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}s.d(t,{A:()=>n})}}]);
//# sourceMappingURL=515.76453bd1.chunk.js.map